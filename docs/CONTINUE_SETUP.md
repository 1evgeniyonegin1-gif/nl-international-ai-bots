# Продолжение настройки — Публикация в Topics

## Текущий статус

**Что сделано:**
- Боты работают 24/7 на VPS (194.87.86.103)
- Группа создана и оформлена с Topics (6 тем)
- Код обновлён для публикации в темы группы
- Каждый пост будет содержать ссылку на AI-Куратора

**Что осталось:**
- Получить ID группы и тем
- Обновить .env на сервере
- Перезапустить ботов
- Добавить контент-менеджера в группу

---

## Шаг 1: Получить ID группы и тем

### Способ через @getmyid_bot:

1. Добавь бота **@getmyid_bot** в свою группу (как участника)
2. Напиши любое сообщение в **каждую тему** по очереди
3. Бот ответит с ID — запиши их

**Что записать:**
```
GROUP_ID = (Chat ID, будет отрицательным: -100...)

TOPIC_PRODUCTS = (ID темы "Продукты")
TOPIC_BUSINESS = (ID темы "Бизнес")
TOPIC_TRAINING = (ID темы "Обучение")
TOPIC_NEWS = (ID темы "Новости")
TOPIC_SUCCESS = (ID темы "Истории успеха")
TOPIC_FAQ = (ID темы "FAQ")
```

---

## Шаг 2: Обновить сервер

### Подключение:
```bash
ssh root@194.87.86.103
```
Пароль: в панели Timeweb → Доступ → Root-пароль

### Обновление кода:
```bash
cd /root/nl-international-ai-bots && git pull
```

### Редактирование .env:
```bash
nano .env
```

Добавь в конец файла (замени XXX на реальные ID):
```
GROUP_ID=-100XXXXXXXXXX
CURATOR_BOT_USERNAME=@nl_curator_bot
TOPIC_PRODUCTS=XXX
TOPIC_BUSINESS=XXX
TOPIC_TRAINING=XXX
TOPIC_NEWS=XXX
TOPIC_SUCCESS=XXX
TOPIC_FAQ=XXX
```

Сохранить: `Ctrl+O`, Enter, `Ctrl+X`

### Перезапуск ботов:
```bash
systemctl restart nl-bots
```

### Проверка:
```bash
systemctl status nl-bots
journalctl -u nl-bots -n 20
```

---

## Шаг 3: Добавить контент-менеджера в группу

1. Найди бота контент-менеджера (токен: 8522139282)
2. Добавь его в группу как **администратора** с правами:
   - Отправка сообщений
   - Публикация в темы

---

## Шаг 4: Тестирование

1. Напиши контент-менеджеру `/generate product`
2. Нажми "Опубликовать"
3. Пост должен появиться в теме "Продукты" со ссылкой на куратора

---

## Маппинг типов постов → темы

| Тип поста | Куда публикуется |
|-----------|------------------|
| product | Продукты |
| motivation | Истории успеха |
| news | Новости |
| tips | Обучение |
| success_story | Истории успеха |
| promo | Новости |

---

## Полезные команды

```bash
# Подключение к серверу
ssh root@194.87.86.103

# Статус ботов
systemctl status nl-bots

# Логи в реальном времени
journalctl -u nl-bots -f

# Перезапуск
systemctl restart nl-bots

# Редактирование .env
nano /root/nl-international-ai-bots/.env
```

---

## Контакты ботов

- **AI-Куратор:** @nl_curator_bot (токен: 8546022649)
- **Контент-Менеджер:** токен 8522139282

---

## Если что-то пошло не так

1. Проверь логи: `journalctl -u nl-bots -n 50`
2. Убедись что GROUP_ID начинается с `-100`
3. Проверь что бот добавлен админом в группу
4. Topic ID должны быть числами (2, 3, 4...)
