# Reference Images - –û—Ç—á—ë—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–î–∞—Ç–∞:** 20 —è–Ω–≤–∞—Ä—è 2026
**–ó–∞–¥–∞—á–∞:** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è —Ç–æ—á–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ–≤ –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–æ–¥—É–∫—Ç–æ–≤ NL —á–µ—Ä–µ–∑ YandexART (text-to-image) AI –º–æ–∂–µ—Ç –Ω–µ—Ç–æ—á–Ω–æ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å:
- –£–ø–∞–∫–æ–≤–∫—É –ø—Ä–æ–¥—É–∫—Ç–∞
- –¶–≤–µ—Ç–∞ –∏ –¥–µ—Ç–∞–ª–∏
- –õ–æ–≥–æ—Ç–∏–ø—ã –∏ –Ω–∞–¥–ø–∏—Å–∏
- –§–æ—Ä–º—É –∏ —Ä–∞–∑–º–µ—Ä

–≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ "–≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏—è–º" - –ø—Ä–æ–¥—É–∫—Ç –≤—ã–≥–ª—è–¥–∏—Ç –Ω–µ–ø—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–Ω–æ.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ **Reference Images** —Å –¥–≤—É–º—è —Ä–µ–∂–∏–º–∞–º–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:

### 1. Text-to-Image (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π)
AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å –Ω—É–ª—è.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è: –º–æ—Ç–∏–≤–∞—Ü–∏—è, –Ω–æ–≤–æ—Å—Ç–∏, –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
- –ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∞

### 2. Image-to-Image (—Å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–º)
AI –±–µ—Ä—ë—Ç **—Ä–µ–∞–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ –ø—Ä–æ–¥—É–∫—Ç–∞** –∏ —É–ª—É—á—à–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ñ–æ–Ω, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–æ–¥—É–∫—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è: –ø–æ—Å—Ç—ã –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–∞—Ö
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞

---

## üì¶ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. Image-to-Image –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ YandexART

**–§–∞–π–ª:** `shared/ai_clients/yandexart_client.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `reference_image` –≤ –º–µ—Ç–æ–¥ `generate_image()`
- YandexART API –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `messages[].image`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–∂–∏–º–∞ image-to-image —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Yandex

```python
# –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å
image = await yandex_art.generate_image(
    prompt="–£–ª—É—á—à–∏ —Ñ–æ–Ω, —Å–æ—Ö—Ä–∞–Ω–∏ –ø—Ä–æ–¥—É–∫—Ç",
    reference_image=base64_product_photo
)
```

### 2. –ú–µ–Ω–µ–¥–∂–µ—Ä —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–§–∞–π–ª:** `content_manager_bot/utils/product_reference.py`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ó–∞–≥—Ä—É–∑–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏–∑ JSON
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–¥—É–∫—Ç–µ
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ –≤ base64
- –ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ** —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–∞ –ø–æ—Å—Ç–∞
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è image-to-image —Ä–µ–∂–∏–º–∞

```python
manager = ProductReferenceManager()

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥—ë—Ç –ø—Ä–æ–¥—É–∫—Ç –≤ —Ç–µ–∫—Å—Ç–µ
product = manager.extract_product_from_content(post_text)

# –ó–∞–≥—Ä—É–∑–∏—Ç –µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
image = manager.get_product_image_base64(product_key, category)
```

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Content Generator

**–§–∞–π–ª:** `content_manager_bot/ai/content_generator.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `use_product_reference` –≤ `generate_image()`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –≤ —Ç–µ–∫—Å—Ç–µ –ø–æ—Å—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ (image-to-image vs text-to-image)
- –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞

```python
# –†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
image, prompt = await generator.generate_image(
    post_type="product",
    post_content=post_text,
    use_product_reference=True  # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
)
# ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç image-to-image –µ—Å–ª–∏ –Ω–∞–π–¥—ë—Ç –ø—Ä–æ–¥—É–∫—Ç
```

### 4. –ö–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥ (–≤–æ–¥—è–Ω—ã–µ –∑–Ω–∞–∫–∏, –ª–æ–≥–æ—Ç–∏–ø—ã)

**–§–∞–π–ª:** `content_manager_bot/utils/image_helpers.py`

**–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `add_watermark()` - —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫
- `add_logo_overlay()` - –Ω–∞–ª–æ–∂–µ–Ω–∏–µ PNG –ª–æ–≥–æ—Ç–∏–ø–∞
- `resize_image()` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–π

–¢—Ä–µ–±—É–µ—Ç: `Pillow==10.2.0` (–¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ requirements.txt)

```python
# –î–æ–±–∞–≤–∏—Ç—å –≤–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫
image = add_watermark(image_base64, "NL International", "bottom_right")

# –ù–∞–ª–æ–∂–∏—Ç—å –ª–æ–≥–æ—Ç–∏–ø
image = add_logo_overlay(image_base64, "content/resources/nl_logo.png")
```

### 5. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

**–°–æ–∑–¥–∞–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤:**

```
content/
‚îú‚îÄ‚îÄ product_images/              # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ products_mapping.json   # –ú–∞–ø–ø–∏–Ω–≥ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (—Å–æ–∑–¥–∞–Ω —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏)
‚îÇ   ‚îú‚îÄ‚îÄ greenflash/             # –í–∏—Ç–∞–º–∏–Ω—ã GreenFlash
‚îÇ   ‚îú‚îÄ‚îÄ lovely/                 # –ö–æ—Å–º–µ—Ç–∏–∫–∞ Lovely
‚îÇ   ‚îú‚îÄ‚îÄ energy_diet/            # Energy Diet
‚îÇ   ‚îî‚îÄ‚îÄ other/                  # –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
‚îî‚îÄ‚îÄ resources/                   # –†–µ—Å—É—Ä—Å—ã (–ª–æ–≥–æ—Ç–∏–ø—ã, —à—Ä–∏—Ñ—Ç—ã)
    ‚îú‚îÄ‚îÄ nl_logo.png             # –°—é–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–º–µ—Å—Ç–∏—Ç—å –ª–æ–≥–æ—Ç–∏–ø
    ‚îî‚îÄ‚îÄ README.md
```

**products_mapping.json** —Å–æ–¥–µ—Ä–∂–∏—Ç:
- 15+ –ø—Ä–∏–º–µ—Ä–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (GreenFlash, Lovely, Energy Diet)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞: –∫–∞—Ç–µ–≥–æ—Ä–∏—è ‚Üí –ø—Ä–æ–¥—É–∫—Ç ‚Üí {name, image, description}
- –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

### 6. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

**–§–∞–π–ª:** `content_manager_bot/utils/product_reference.py`

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `extract_product_from_content()` —Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤:
- "vision", "–∑—Ä–µ–Ω–∏–µ" ‚Üí GreenFlash Vision Plus
- "–æ–º–µ–≥–∞", "omega" ‚Üí GreenFlash Omega-3
- "–∫–æ–ª–ª–∞–≥–µ–Ω" ‚Üí GreenFlash –ö–æ–ª–ª–∞–≥–µ–Ω
- "–∫—Ä–µ–º" ‚Üí Lovely –∫—Ä–µ–º –¥–ª—è –ª–∏—Ü–∞
- "energy diet" ‚Üí Energy Diet Smart
- –ò –µ—â—ë 15+ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

### 7. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–°–æ–∑–¥–∞–Ω–æ 3 –¥–æ–∫—É–º–µ–Ω—Ç–∞:**

1. **REFERENCE_IMAGES_QUICKSTART.md** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç)
2. **docs/REFERENCE_IMAGES.md** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (API, –ø—Ä–∏–º–µ—Ä—ã, troubleshooting)
3. **content/resources/README.md** - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–µ—Å—É—Ä—Å–∞–º

**–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:**
- `examples/test_reference_images.py` - –ø–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

```
User Request
    ‚Üì
ContentGenerator.generate_post("product")
    ‚Üì
ContentGenerator.generate_image(post_type, post_content)
    ‚Üì
ProductReferenceManager.extract_product_from_content(post_content)
    ‚Üì (–µ—Å–ª–∏ –ø—Ä–æ–¥—É–∫—Ç –Ω–∞–π–¥–µ–Ω)
ProductReferenceManager.get_product_image_base64(product_key)
    ‚Üì
YandexARTClient.generate_image(prompt, reference_image=...)
    ‚Üì [image-to-image mode]
YandexART API ‚Üí —É–ª—É—á—à–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
    ‚Üì (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
add_watermark() / add_logo_overlay()
    ‚Üì
Final Image (base64)
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã YandexART API

**Text-to-Image:**
```json
{
  "messages": [
    {"weight": "1", "text": "–ø—Ä–æ–º–ø—Ç"}
  ]
}
```

**Image-to-Image:**
```json
{
  "messages": [
    {"weight": "1", "image": "base64_reference_image"},
    {"weight": "1", "text": "–ø—Ä–æ–º–ø—Ç –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è"}
  ]
}
```

### –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è image-to-image

–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞:
```
"–£–ª—É—á—à–∏ —Ñ–æ–Ω —ç—Ç–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ {name}.
–°–æ—Ö—Ä–∞–Ω–∏ –ø—Ä–æ–¥—É–∫—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –Ω–æ —Å–æ–∑–¥–∞–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç—É–¥–∏–π–Ω—ã–π —Ñ–æ–Ω.
{original_prompt}.
–ü—Ä–æ–¥—É–∫—Ç –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ —Ü–µ–Ω—Ç—Ä–µ –≤–Ω–∏–º–∞–Ω–∏—è, —Ñ–æ–Ω - –¥–æ–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–ø–æ–∑–∏—Ü–∏—é."
```

---

## üìä –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

‚úÖ **Image-to-Image –≤ YandexART** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤** - –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –≤ —Ç–µ–∫—Å—Ç–µ
‚úÖ **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –∏ –º–∞–ø–ø–∏–Ω–≥ JSON
‚úÖ **–ö–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥** - –≤–æ–¥—è–Ω—ã–µ –∑–Ω–∞–∫–∏ –∏ –ª–æ–≥–æ—Ç–∏–ø—ã (Pillow)
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –±–æ—Ç–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø–æ–¥—Ä–æ–±–Ω—ã–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –∏ –ø—Ä–∏–º–µ—Ä—ã
‚úÖ **–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç** - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

---

## üöÄ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:

1. **–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤**
   - –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ NL
   - –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤ `content/product_images/–∫–∞—Ç–µ–≥–æ—Ä–∏—è/–ø—Ä–æ–¥—É–∫—Ç.jpg`
   - –ú–∏–Ω–∏–º—É–º 800x800, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 1024x1024

2. **–û–±–Ω–æ–≤–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥** (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã –ø—Ä–æ–¥—É–∫—Ç—ã –Ω–µ –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤)
   - –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `content/product_images/products_mapping.json`
   - –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Pillow** (–¥–ª—è –∫–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥–∞)
   ```bash
   pip install -r requirements.txt
   ```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:

4. **–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–æ—Ç–∏–ø NL** (–¥–ª—è –Ω–∞–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
   - PNG —Ñ–∞–π–ª —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é
   - –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤ `content/resources/nl_logo.png`

5. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ–¥—è–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤**
   - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ö–µ–Ω–¥–ª–µ—Ä –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ `content_manager_bot/handlers/callbacks.py`

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```python
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞ –æ –ø—Ä–æ–¥—É–∫—Ç–µ
generator = ContentGenerator()
post_text, _ = await generator.generate_post("product")

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Ä–µ–∂–∏–º)
image_base64, prompt = await generator.generate_image("product", post_text)

# –ï—Å–ª–∏ –ø—Ä–æ–¥—É–∫—Ç —É–ø–æ–º—è–Ω—É—Ç –≤ —Ç–µ–∫—Å—Ç–µ –ò –µ—Å—Ç—å –µ–≥–æ —Ñ–æ—Ç–æ ‚Üí image-to-image
# –ò–Ω–∞—á–µ ‚Üí text-to-image
```

### –ü—Ä–∏–º–µ—Ä 2: –° –∫–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥–æ–º

```python
from content_manager_bot.utils.image_helpers import add_watermark, add_logo_overlay

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º
image_base64, _ = await generator.generate_image("product", post_text)

# –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫
image = add_watermark(image_base64, "NL International", "bottom_right", opacity=100)

# –î–æ–±–∞–≤–ª—è–µ–º –ª–æ–≥–æ—Ç–∏–ø
final_image = add_logo_overlay(image, "content/resources/nl_logo.png", "top_left", 8)
```

### –ü—Ä–∏–º–µ—Ä 3: –†—É—á–Ω–æ–π –≤—ã–±–æ—Ä —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞

```python
from content_manager_bot.utils.product_reference import ProductReferenceManager

ref_manager = ProductReferenceManager()
ref_image = ref_manager.get_product_image_base64("vision_plus", "greenflash")

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–º
image = await yandex_art.generate_image(
    prompt="–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å—Ç—É–¥–∏–π–Ω–æ–µ —Ñ–æ—Ç–æ",
    reference_image=ref_image
)
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:**

```bash
python examples/test_reference_images.py
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- –ó–∞–≥—Ä—É–∑–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (text-to-image –∏ image-to-image)
- –ö–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥ (watermarks, logos)

**–¢–µ—Å—Ç —á–µ—Ä–µ–∑ –±–æ—Ç–∞:**

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞: `python -m content_manager_bot.main`
2. –ö–æ–º–∞–Ω–¥–∞: `/generate product`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `Using reference image for product: ...` (–µ—Å–ª–∏ –µ—Å—Ç—å —Ñ–æ—Ç–æ)

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `content_manager_bot/utils/product_reference.py` (220 —Å—Ç—Ä–æ–∫)
- `content/product_images/products_mapping.json` (—à–∞–±–ª–æ–Ω)
- `examples/test_reference_images.py` (180 —Å—Ç—Ä–æ–∫)
- `REFERENCE_IMAGES_QUICKSTART.md`
- `REFERENCE_IMAGES_IMPLEMENTATION.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
- `docs/REFERENCE_IMAGES.md` (–ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- `content/resources/README.md`

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `shared/ai_clients/yandexart_client.py` (+15 —Å—Ç—Ä–æ–∫)
- `content_manager_bot/ai/content_generator.py` (+50 —Å—Ç—Ä–æ–∫)
- `content_manager_bot/utils/image_helpers.py` (+200 —Å—Ç—Ä–æ–∫)
- `requirements.txt` (+1 –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: Pillow)

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ –ø–∞–ø–∫–∏:**
- `content/product_images/` (—Å –ø–æ–¥–ø–∞–ø–∫–∞–º–∏)
- `content/resources/`
- `examples/`

---

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (–∏–¥–µ–∏)

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ —Å —Å–∞–π—Ç–∞ NL**
   - –ü–∞—Ä—Å–∏–Ω–≥ –∫–∞—Ç–∞–ª–æ–≥–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

2. **–£–º–Ω–æ–µ –∫—Ä–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü –ø—Ä–æ–¥—É–∫—Ç–∞
   - –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ–Ω–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ YandexART

3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**
   - –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
   - –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–æ—Ö–æ–∂–∏—Ö –ø–æ—Å—Ç–æ–≤

4. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∏–ª–µ–π**
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∏–ª–µ–π
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏

5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞–º–∏**
   - Midjourney (—á–µ—Ä–µ–∑ API)
   - DALL-E 3 (—á–µ—Ä–µ–∑ OpenAI API)
   - Stable Diffusion (–ª–æ–∫–∞–ª—å–Ω–æ)

---

## üéØ –í—ã–≤–æ–¥—ã

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è:

‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å** - –ø—Ä–æ–¥—É–∫—Ç—ã –≤—ã–≥–ª—è–¥—è—Ç —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å text-to-image –∏–ª–∏ image-to-image
‚úÖ **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
‚úÖ **–ö–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥** - –≤–æ–¥—è–Ω—ã–µ –∑–Ω–∞–∫–∏ –∏ –ª–æ–≥–æ—Ç–∏–ø—ã "–∏–∑ –∫–æ—Ä–æ–±–∫–∏"

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (–Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É)
‚ö†Ô∏è YandexART –º–æ–∂–µ—Ç –Ω–µ –∏–¥–µ–∞–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –ø—Ä–æ–¥—É–∫—Ç–∞ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞)
‚ö†Ô∏è –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: 30-60 —Å–µ–∫ (–∫–∞–∫ –∏ –æ–±—ã—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. –ù–∞—á–∞—Ç—å —Å —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (—Ç–æ–ø-10)
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ç–æ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ (1024x1024+)
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ —É–ª—É—á—à–∞—Ç—å –ø—Ä–æ–º–ø—Ç—ã
4. –î–æ–±–∞–≤–ª—è—Ç—å –≤–æ–¥—è–Ω—ã–µ –∑–Ω–∞–∫–∏ –Ω–∞ –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: [REFERENCE_IMAGES_QUICKSTART.md](REFERENCE_IMAGES_QUICKSTART.md)
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ: [docs/REFERENCE_IMAGES.md](docs/REFERENCE_IMAGES.md)

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
python examples/test_reference_images.py
```

**–õ–æ–≥–∏:**
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
python -m content_manager_bot.main

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
journalctl -u nl-bots -f | grep "reference\|image"
```

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 20 —è–Ω–≤–∞—Ä—è 2026
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
